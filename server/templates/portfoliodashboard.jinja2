{% extends "base.html" %}

        {% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/snippet.css') }}">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        {% endblock %}

        {% block script %}
        <script src="{{ url_for('static', filename='js/snippet.js') }}"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


        {% endblock %}

        {% block content %}
<form action="/editportfolio" method="get">

<!-- Not Displayed -->
<div style="display: none;">
    <input type="text" name="initialInvestment" value="{{ questionnaire[" initialInvestment"] }}">
    <input type="text" name="purchaseAmount" value="{{ questionnaire[" purchaseAmount"] }}">
    <input type="text" name="purchaseDate" value="{{ questionnaire[" purchaseDate"] }}">
    <input type="text" name="retirementAmount" value="{{ questionnaire[" retirementAmount"] }}">
    <input type="text" name="retirementDate" value="{{ questionnaire[" retirementDate"] }}">
    <input type="text" name="riskAppetite" value="{{ questionnaire[" riskAppetite"] }}">
    <input type="text" name="option" value="{{ option }}">
    <input type="text" name="portfolioName" value="{{ portfolioName }}">
</div>


    {% if display == True %}
        <div class="container text-center">

            <div class="section-heading text-center">
                <br>
                <h2> Let's take a look at this portfolio</h2>
                    <p class="text-muted"> A guided walk through of basic portfolio analysis </p>
                <hr><br>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h3> First off the bat, here is that portfolio in terms of weighting allocation </h3>
                    <p class="text-muted"> Portfolio weights are nothing but the percentage of dollars allocated to the specific asset </p>
                    {{pie}}
                </div>
                <br>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h3> Next up, we look at the portfolio's performance </h3>
                    <p class="text-muted"> The cumulative returns tell us how much the portfolio grew over the horizon </p>
                    {{plot}}
                </div>
                <br>
            </div>


            <div class="row">

                    <div class="col-md-12">
                        <h3> Some quick numbers at a glance further tell the performance story </h3>
                    </div>

                    <div class="col-md-4">
                        <div class="feature-item">
                                <h4>{{ stats[0] }}&#37; </h4>
                                <p class="text-muted"> Total Period Returns </p>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="feature-item">
                            <h4> {{ '${:,.2f}'.format(stats[1]) }} </h4>
                            <p class="text-muted"> Minimum Portfolio Value </p>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="feature-item">
                            <h4> {{ '${:,.2f}'.format(stats[2]) }} </h4>
                            <p class="text-muted"> Maximum Portfolio Value</p>
                        </div>
                    </div>
                    <br>
            </div>

            <br><br><br>

            <div class="row">

                <div class="col-md-12">
                    <h2> I would like to see more detailed statistics on this portfolio! </h2>

                    {% if rolling > 1%}
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider round" id="toggle"></span>
                        </label>
                        <p class="text-muted"> Rolling Volatility, Sharpe Performance, Waterfalls and Drawdowns </p>
                        <hr><br>

                        <div id="details">
                            <div class="row">
                                <div class="col-md-12">
                                    <h3> {{rolling}}-day rolling Volatility </h3>
                                    <p class="text-muted"> Giving us an indication as to how stable this portfolio is </p>
                                    {{vols_plot}}
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <h3> {{rolling}}-day rolling Sharpe Ratio </h3>
                                    <p class="text-muted"> Where a larger value means a bigger bang for your buck (greater risk-adjusted returns) </p>
                                    {{sharpe_plot}}
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-12">
                                    <h3> Portfolio Drawdowns</h3>
                                    <p class="text-muted"> Showing how far the portfolio fell from it's highs</p>

                                    {{underwater}}
                                    {{drawdown}}
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                </div>
                            </div>
                        </div>

                    {% else %}
                        <p class="text-muted"> Before we can do that, try backtesting over a longer period of time </p>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}
<!-- Above is not displayed -->

<!--<div>-->
<!--    {{ portfolioName }}-->
<!--</div>-->
<!--<div class="container">-->
<!--&lt;!&ndash;    <center>&ndash;&gt;-->
<!--&lt;!&ndash;        <div id="container" style="width: 550px; height: 400px; margin: 0 auto"></div>&ndash;&gt;-->
<!--&lt;!&ndash;    </center>&ndash;&gt;-->
<!--&lt;!&ndash;    <center>&ndash;&gt;-->
<!--&lt;!&ndash;        <div id="container2" style="width: 550px; height: 400px; margin: 0 auto"></div>&ndash;&gt;-->
<!--&lt;!&ndash;    </center>&ndash;&gt;-->
<!--&lt;!&ndash;    <center>&ndash;&gt;-->
<!--&lt;!&ndash;        <div id="columnchart_values" style="width: 900px; height: 300px;"></div>&ndash;&gt;-->
<!--&lt;!&ndash;    </center>&ndash;&gt;-->
<!--    <br><br><br>-->

<!--    <div class="row">-->

<!--        <div class="col-md-12">-->
<!--            <h2> I would like to see more detailed statistics on this portfolio! </h2>-->

<!--            {% if rolling > 1%}-->
<!--            <label class="switch">-->
<!--                <input type="checkbox">-->
<!--                <span class="slider round" id="toggle"></span>-->
<!--            </label>-->
<!--            <p class="text-muted"> Rolling Volatility, Sharpe Performance, Waterfalls and Drawdowns </p>-->
<!--            <hr>-->
<!--            <br>-->

<!--            <div id="details">-->
<!--                <div class="row">-->
<!--                    <div class="col-md-12">-->
<!--                        <h3> {{rolling}}-day rolling Volatility </h3>-->
<!--                        <p class="text-muted"> Giving us an indication as to how stable this portfolio is </p>-->
<!--                        {{vols_plot}}-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="row">-->
<!--                    <div class="col-md-12">-->
<!--                        <h3> {{rolling}}-day rolling Sharpe Ratio </h3>-->
<!--                        <p class="text-muted"> Where a larger value means a bigger bang for your buck (greater-->
<!--                            risk-adjusted returns) </p>-->
<!--                        {{sharpe_plot}}-->
<!--                    </div>-->
<!--                </div>-->


<!--                <div class="row">-->
<!--                    <div class="col-md-12">-->
<!--                        <h3> Portfolio Drawdowns</h3>-->
<!--                        <p class="text-muted"> Showing how far the portfolio fell from it's highs</p>-->

<!--                        {{underwater}}-->
<!--                        {{drawdown}}-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="row">-->
<!--                    <div class="col-md-12">-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            {% else %}-->
<!--            <p class="text-muted"> Before we can do that, try backtesting over a longer period of time </p>-->
<!--            {% endif %}-->
<!--        </div>-->
<!--    </div>-->


    <!--    <div class="row">-->
    <!--        <div class="MultiCarousel" data-items="1,3,5,6" data-slide="1" id="MultiCarousel"  data-interval="1000">-->
    <!--            <div class="MultiCarousel-inner">-->

    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">returnSinceInception</p>-->
    <!--                        <p>{{ returnSinceInception }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">targetAmount</p>-->
    <!--                        <p>{{ targetAmount }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">percentCompleted</p>-->
    <!--                        <p>{{ percentCompleted }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">timeTilCompletion</p>-->
    <!--                        <p>{{ timeTilCompletion }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">expectedVol</p>-->
    <!--                        <p>{{ expectedVol }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">weightings</p>-->
    <!--                        <p>{{ weightings }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">long</p>-->
    <!--                        <p>{{ long }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--                <div class="item">-->
    <!--                    <div class="pad15">-->
    <!--                        <p class="lead">short</p>-->
    <!--                        <p>{{ short }}</p>-->
    <!--                    </div>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--            <button class="btn btn-primary leftLst"><</button>-->
    <!--            <button class="btn btn-primary rightLst">></button>-->
    <!--        </div>-->
    <!--    </div>-->
</div>
<input type="submit" value="Edit">
</form>
        {% endblock %}