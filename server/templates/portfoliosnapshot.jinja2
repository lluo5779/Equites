{% extends "base.html" %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/snippet.css') }}">
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
{% endblock %}

{% block script %}
<script src="{{ url_for('static', filename='js/snippet.js') }}"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
 
{% endblock %}

{% block content %}
    {% for i in range(portfolioNames| length) %}
      <script language = "JavaScript">
        google.charts.load("current", {packages:['corechart', 'line']});
        google.charts.setOnLoadCallback(drawChart);
         function drawChart() {
            var arr = (function () { /* {{ histValues[i][:] }}*/}).toString().split('\n').slice(1,-1).join('\n').split('...').join(" ").split("\n")

            // Define the chart to be drawn.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Month');
            data.addColumn('number', 'Tokyo');
            var table = new Array;
            for(var i = 0, len = arr.length; i < len; i++){
                var cur = arr[i].trim().split(" ");
                table.push(new Array(cur[0], parseFloat(cur[5])));
            }               
            data.addRows(table);
               
            // Set chart options
            var options = {'title' : 'histValues[-1]',
               hAxis: {
                  title: 'Date'
               },
               vAxis: {
                  title: 'Value'
               },   
               'width':550,
               'height':400   
            };

            // Instantiate and draw the chart.
            var chart = new google.visualization.LineChart(document.getElementById('container'));
            chart.draw(data, options);
         }
         google.charts.setOnLoadCallback(drawChart);
      </script>
        <center><div id = "container" style = "width: 550px; height: 400px; margin: 0 auto"></div></center>
        <form action="/portfoliodashboard" method="get">
        <div style = "width: 550px>
        <div class="row" >
        <div class="MultiCarousel" data-items="1,3,5,6" data-slide="1" id="MultiCarousel"  data-interval="1000">
            <div class="MultiCarousel-inner">

                <div class="item">
                    <div class="pad15">
                        <p class="lead">portfolioNames</p>
                        <p>{{ portfolioNames[i] }}</p>
                    </div>
                </div>
                <div class="item">
                    <div class="pad15">
                        <p class="lead">histValues</p>
                        <p>{{ histValues[i][-1] }}</p>
                    </div>
                </div>
                <div class="item">
                    <div class="pad15">
                        <p class="lead">returnSinceInception</p>
                        <p>{{ returnSinceInception[i] }}</p>
                    </div>
                </div>
                <div class="item">
                    <div class="pad15">
                        <p class="lead">targetAmount</p>
                        <p>{{ targetAmount[i] }}</p>
                    </div>
                </div>
                <div class="item">
                    <div class="pad15">
                        <p class="lead">percentCompleted</p>
                        <p>{{ percentCompleted[i] }}</p>
                    </div>
                </div>
                <div class="item">
                    <div class="pad15">
                        <p class="lead">timeTilCompletion</p>
                        <p>{{ timeTilCompletion[i] }}</p>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary leftLst"><</button>
            <button class="btn btn-primary rightLst">></button>
        </div>
    </div>
</div>
</div>
            <input type="submit" value="See Portofolio">
         </form>

    {% endfor %}
{% endblock %}
